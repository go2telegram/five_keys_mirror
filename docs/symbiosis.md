# Symbiotic intelligence

Последний этап программы объединяет решения человека и алгоритма в единый контур.  Ниже — краткий обзор модулей, команд и метрик.

## Архитектура

- `symbiosis/core.py` — ядро агрегирует три типа сигналов: человеческую оценку, уверенность модели и тональный показатель.  В окне из 1000 итераций считается Human–Machine Interaction (HMI) и показатель взаимопонимания.
- `bot/admin_symbiosis.py` — админская команда `/symbiosis_status`, выводящая баланс вклада, текущую HMI и другие метрики.
- HTTP-эндпоинт `/symbiosis_status` — JSON-версия тех же метрик для внешнего мониторинга.

## Показатели

| Метрика | Описание |
| ------- | -------- |
| `human_contribution` | Средняя нормированная оценка от людей. |
| `machine_contribution` | Средний confidence ответов ИИ. |
| `tonal_alignment` | Тональный коэффициент (−1…1 → 0…1). |
| `balance` | Доля человеческого вклада в общем объёме. |
| `mutual_understanding` | Смешанный индикатор баланса и тона. |
| `hmi` | Итоговая Human–Machine Interaction метрика. |

Критическое условие готовности: `hmi > 0.75` на окне из 1000 итераций.

## Тестирование

В ядре есть метод-помощник `simulate_positive_loop`, позволяющий быстро проверить достижение требуемого уровня HMI:

```python
from symbiosis.core import SymbiosisCore

core = SymbiosisCore()
status = await core.simulate_positive_loop(1000)
assert status["hmi"] > 0.75
```

## Откат

Чтобы отключить контур, добавьте `ENABLE_SYMBIOTIC_INTELLIGENCE=false` в `.env` или переменные окружения и перезапустите сервис.  Команда и эндпоинт будут скрыты.
