# Генератор маркетинговых креативов

Команда `/generate_creative` доступна только администратору. Она создаёт 3–5 текстовых вариантов для постов и рекламы с помощью LLM и сохраняет файлы на диске.

## Использование

```
/generate_creative theme="детокс" audience="new" format=instagram tone="дружелюбный" count=4
```

**Аргументы:**

- `theme` — обязательная тема или оффер.
- `audience` — краткое описание целевой аудитории.
- `format` — `telegram`, `instagram` или `reels` (по умолчанию — `telegram`).
- `tone` — желаемая тональность.
- `count` — желаемое число вариантов (от 3 до 5).

Можно использовать кавычки или писать значения без пробелов: `theme=детокс`, `audience="молодые родители"`.

## Что делает команда

1. Собирает подсказку из шаблонов для выбранного формата.
2. Запрашивает модель OpenAI через `app.utils_openai.ai_generate`.
3. Проверяет длину каждого текста и CTA (≤ 2200 символов).
4. Сохраняет результат в папке `media/creatives/YYYY/MM/DD/` сразу в двух файлах:
   - `*.md` — с заголовком и выделенным CTA;
   - `*.txt` — простой текст без форматирования.
5. Отправляет администратору краткий отчёт и прикрепляет Markdown-файлы в чат.

## Проверка

Запусти команду:

```
/generate_creative theme="детокс" audience="new"
```

В ответ бот пришлёт сообщение со списком файлов. Они появятся в директории `media/creatives/<год>/<месяц>/<день>/`. Проверь, что в каждой паре `.md`/`.txt` содержится отдельный креатив с CTA и что длина текста укладывается в лимит.
