# GO-LIVE Runbook ‚Äî Release 1.3.1 Dress Rehearsal

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ—à–∞–≥–æ–≤—É—é —Ä–µ–ø–µ—Ç–∏—Ü–∏—é –ø—Ä–æ–¥-—Ä–µ–ª–∏–∑–∞ —Å –∫–∞–Ω–∞—Ä–µ–µ—á–Ω—ã–º –≤—ã–∫–∞—Ç–æ–º –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –æ—Ç–∫–∞—Ç–∞.

## 1. Code freeze
- ‚úÖ –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –≤–µ—Ç–∫—É `main` ‚Äî —Ç–æ–ª—å–∫–æ —Ä–µ–ª–∏–∑–Ω—ã–µ –∫–æ–º–º–∏—Ç—ã.
- ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∏—á–∞-—Ñ–ª–∞–≥–∏ –≤–∫–ª—é—á–µ–Ω—ã –Ω–∞ STAGE (`/ab_status`).
- ‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ `RELEASE_NOTES.md` –∏ –∑–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –≤–µ—Ä—Å–∏—é.

## 2. Release build
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç–µ workflow `release.yml` (Push –≤ `main`).
- ‚úÖ –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–±–æ—Ä–∫–∏ self-audit, —Ç–µ—Å—Ç–æ–≤ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Ä–µ–ª–∏–∑–Ω–æ–π –∑–∞–º–µ—Ç–∫–∏.

## 3. Stage health-check
- ‚úÖ –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è STAGE –∑–∞–π–¥–∏—Ç–µ –Ω–∞ `/admin/dashboard?token=<STAGE_TOKEN>`.
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `/health` –∏ `/metrics` ‚Äî –≤—Å–µ —Å—Ç–∞—Ç—É—Å—ã ¬´ok¬ª.
- ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `CANARY_PERCENT`=0 –∏ –≤—Å–µ —Ñ–ª–∞–≥–∏ –≤–∫–ª—é—á–µ–Ω—ã (stage defaults).

## 4. Self-audit
- ‚úÖ –ü—Ä–æ–π–¥–∏—Ç–µ —á–µ–∫-–ª–∏—Å—Ç –≤ `RELEASE_NOTES.md` (—Ä–∞–∑–¥–µ–ª STAGE).
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–æ–∫ –≤ Sentry (—Ä–µ–ª–∏–∑ `vX.Y.Z+stage`).

## 5. Smoke-test
- ‚úÖ –í—ã–ø–æ–ª–Ω–∏—Ç–µ `/start` –∏ /quiz —Å—Ü–µ–Ω–∞—Ä–∏–∏ –Ω–∞ STAGE.
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–æ–≤—ã–π –æ–Ω–±–æ—Ä–¥–∏–Ω–≥, –Ω–∞–≤–∏–≥–∞—Ü–∏—é –∏ –º–µ–¥–∏–∞–ø—Ä–æ–∫—Å–∏.
- ‚úÖ –ü—Ä–æ–≥–æ–Ω–∏—Ç–µ –ø–ª–∞—Ç—ë–∂/–ª–∏–¥ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ) –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

## 6. Canary rollout (PROD)
1. üîÑ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `CANARY_PERCENT=10` –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–∏.
2. ‚ñ∂Ô∏è –í—ã–ø–æ–ª–Ω–∏—Ç–µ `/ab_status` ‚Äî —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `FF_NEW_ONBOARDING` –∏ `FF_NAV_FOOTER`=OFF, –Ω–æ –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ `canary 10%`.
3. üîç –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ñ–∏—á–∏ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ, –ø–æ–ø–∞–≤—à–µ–º –≤ –∫–∞–Ω–∞—Ä–µ–µ—á–Ω—É—é –≥—Ä—É–ø–ø—É.
4. ‚è± –ß–µ—Ä–µ–∑ 30 –º–∏–Ω—É—Ç –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –º–µ—Ç—Ä–∏–∫–∏ `/metrics`, –∂–∞–ª–æ–±—ã –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É.
5. ‚¨ÜÔ∏è –£–≤–µ–ª–∏—á—å—Ç–µ `CANARY_PERCENT` –¥–æ 50%. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏.
6. ‚¨ÜÔ∏è –£–≤–µ–ª–∏—á—å—Ç–µ `CANARY_PERCENT` –¥–æ 100% ‚Äî —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∏—Ç–µ —Ñ–∏—á—É –¥–ª—è –≤—Å–µ—Ö.
7. ‚úÖ –ü–æ—Å–ª–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ –∑–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ —Ñ–ª–∞–≥–∏ –∫–æ–º–∞–Ω–¥–æ–π `/toggle FF_NEW_ONBOARDING on`, `/toggle FF_NAV_FOOTER on`.

## 7. Rollback plan
- ‚Ü©Ô∏è –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –æ—Ç–∫–∞—Ç: `/toggle <FLAG> off` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/toggle FF_NEW_ONBOARDING off`).
- üéØ –î–ª—è –ø–æ–ª–Ω–æ–π –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∫–∞–Ω–∞—Ä–µ–µ–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `CANARY_PERCENT=0` –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `/ab_status`.
- üßπ –ü–æ—Å–ª–µ –æ—Ç–∫–∞—Ç–∞ –æ—á–∏—Å—Ç–∏—Ç–µ overrides (`/toggle <FLAG> on`, –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—ã–∫–ª—é—á–µ–Ω–æ).

## 8. Post-release
- üìù –û–±–Ω–æ–≤–∏—Ç–µ `RELEASE_NOTES.md` (—Ä–∞–∑–¥–µ–ª PROD) –∏ self-audit –≤ GitHub Release.
- üìä –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Sentry (—Ä–µ–ª–∏–∑ `vX.Y.Z`).
- üì£ –°–æ–æ–±—â–∏—Ç–µ –∫–æ–º–∞–Ω–¥–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –≤—ã–∫–∞—Ç–∞.
