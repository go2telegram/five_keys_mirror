# Five Keys Bot — Operational Handbook

Добро пожаловать в единый источник знаний по обслуживанию и развитию Telegram-бота Five Keys. Здесь собраны SLO, регламенты эксплуатации, план аварийного восстановления, сведения о метриках и фича-флагах, а также подсказки для разработчиков.

## Обзор сервиса

- **Платформа:** Telegram-бот на базе [Aiogram 3](https://docs.aiogram.dev/).
- **Основной скрипт:** `app/main.py` — поднимает бота, включает все роутеры и запускает aiohttp вебхук для Tribute-платежей.
- **Хранилище:** оперативные данные сохраняются в `app/storage.py`. Персистентных БД нет, поэтому для боевого окружения требуется внешний сторидж или резервное копирование.
- **Планировщик:** APScheduler (`app/scheduler/service.py`) доставляет напоминания и периодические рассылки.
- **Интеграции:** Tribute (подписки), OpenAI (ассистент), PDF-генерация планов (`app/pdf_report.py`).

## Быстрый старт для дежурного

1. Проверь, что `.env` содержит валидные токены и ключи (см. [инструкцию для девов](ops.md#how-to-dev)).
2. Установи зависимости: `pip install -r requirements.txt` + `pip install mkdocs mkdocs-material pdoc`.
3. Локальный запуск: `python -m app.main`.
4. Для документации: `pdoc -o docs/api app` и `mkdocs serve` (откроется на `http://127.0.0.1:8000`).

## Структура документации

- [Эксплуатация и SLO](ops.md)
- [План аварийного восстановления](disaster_recovery.md)
- [События и аудит](events.md)
- [Фича-флаги](flags.md)
- [Канарейка](canary.md)
- [API Reference (генерируется pdoc)](api/index.html)

При изменении сервиса обязательно обновляй соответствующие разделы.
